# =========================================================
# RootGuard Unbound â€“ Recursive DNSSEC Engine
# ---------------------------------------------------------
# Debian-based Unbound configuration
#
# Design Goals:
#  - Full recursive resolver
#  - DNSSEC validation enabled
#  - Runs inside hardened container
#  - No syslog/systemd dependency
#  - Internal engine (localhost only)
#
# Container Model:
#  - PID 1 runs as root
#  - Unbound drops privileges to user "unbound"
#  - Writable state directory: /var/lib/unbound
# =========================================================

server:

  # -------------------------------------------------------
  # Runtime Behaviour
  # -------------------------------------------------------

  # Do not daemonize (container runs in foreground)
  do-daemonize: no

  # Do not use syslog (Docker handles stdout)
  use-syslog: no


  # -------------------------------------------------------
  # Privilege Model
  # -------------------------------------------------------

  # Drop privileges after startup
  username: "unbound"

  # Working directory (must be writable)
  directory: "/var/lib/unbound"


  # -------------------------------------------------------
  # Network Binding
  # -------------------------------------------------------

  # Bind only to localhost
  interface: 127.0.0.1

  # Internal RootGuard resolver port
  port: 5335


  # -------------------------------------------------------
  # Privacy Hardening
  # -------------------------------------------------------

  hide-identity: yes
  hide-version: yes
  qname-minimisation: yes
  deny-any: yes


  # -------------------------------------------------------
  # DNSSEC Validation
  # -------------------------------------------------------

  # Trust anchor stored in writable volume
  auto-trust-anchor-file: "/var/lib/unbound/root.key"


  # -------------------------------------------------------
  # Access Control
  # -------------------------------------------------------

  access-control: 127.0.0.1/32 allow


  # -------------------------------------------------------
  # Performance & Cache
  # -------------------------------------------------------

  num-threads: 1
  msg-cache-size: 32m
  rrset-cache-size: 64m
  prefetch: yes


  # -------------------------------------------------------
  # Logging Level
  # -------------------------------------------------------

  verbosity: 1

  